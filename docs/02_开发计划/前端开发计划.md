# MemeHunter 前端开发计划

> **负责人**: 前端开发  
> **预估工时**: 4 天 (约 32h)  
> **模式**: 中心化版本 + 游客登录

---

## 一、模块概述

前端负责游客登录、房间列表、响应式游戏画布、领取流程等 UI 功能。

### 技术栈
- React 18 + TypeScript
- Vite + Tailwind CSS
- Socket.io-client

### 核心变更
- ✅ 游客模式（无钱包连接即可游玩）
- ✅ 移动端优先设计
- ✅ 领取时输入 Solana 地址

---

## 二、用户流程

```
┌─────────────────────────────────────────────────────────────┐
│                      游客模式流程                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 打开网页          2. 自动登录         3. 选择/扫码房间   │
│  ┌──────────┐       ┌──────────┐       ┌──────────┐        │
│  │  首页    │ ────> │  分配    │ ────> │  房间    │        │
│  │          │       │  游客ID  │       │  列表    │        │
│  └──────────┘       └──────────┘       └──────────┘        │
│                                              │              │
│                                              ▼              │
│  6. 输入地址发放      5. 点击领取         4. 开始游戏       │
│  ┌──────────┐       ┌──────────┐       ┌──────────┐        │
│  │  Solana  │ <──── │  领取    │ <──── │  狩猎    │        │
│  │  地址    │       │  页面    │       │  赚积分  │        │
│  └──────────┘       └──────────┘       └──────────┘        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、页面结构

| 页面 | 路由 | 说明 |
|-----|------|------|
| 首页 | `/` | 自动游客登录 + 房间列表 |
| 房间 | `/r/:roomId` | 二维码跳转入口 |
| 游戏 | `/game/:roomId` | 游戏主界面 |
| 领取 | `/withdraw` | 输入钱包地址领取 |

---

## 四、开发任务

### Phase 1: 游客系统 (Day 1)

```typescript
// hooks/useGuestAuth.ts
function useGuestAuth() {
  // 自动创建/恢复游客 session
  // 存储到 localStorage
  return { user, isLoading, balance }
}
```

- [x] 实现 `useGuestAuth` Hook
- [x] 首页自动登录
- [x] 用户信息持久化 (localStorage)

### Phase 2: 房间功能 (Day 1-2)

- [x] `RoomList.tsx` - 房间列表
- [x] `RoomCard.tsx` - 房间卡片
- [x] 解析 `/r/:roomId` 自动加入
- [x] `QRCodeShare.tsx` - 二维码显示组件

### Phase 3: 移动端适配 (Day 2-3)

```typescript
// 响应式画布
const useResponsiveCanvas = () => {
  const [size, setSize] = useState({ width: 800, height: 600 });
  
  useEffect(() => {
    const handleResize = () => {
      const vw = window.innerWidth;
      if (vw < 768) {
        // 移动端：全宽，保持比例
        const scale = (vw - 32) / 800;
        setSize({ width: 800 * scale, height: 600 * scale });
      }
    };
    // ...
  }, []);
  
  return size;
};
```

- [x] 响应式 Canvas 缩放
- [x] Header 移动端精简
- [x] 底部控制栏固定
- [x] 触控区域优化 (44x44 最小)

### Phase 4: 领取功能 (Day 3-4)

```
┌──────────────────────────────────────────────┐
│              领取页面 UI                      │
├──────────────────────────────────────────────┤
│                                              │
│   💰 可领取余额: 1,234.56                     │
│                                              │
│   ┌────────────────────────────────────┐    │
│   │  输入 Solana 钱包地址              │    │
│   │  So1ana...                        │    │
│   └────────────────────────────────────┘    │
│                                              │
│   ⚠️ 请确认地址正确，发放后无法撤销           │
│                                              │
│         [ 提交领取申请 ]                      │
│                                              │
│   ────────────────────────────────────       │
│   📋 领取历史                                │
│   • 2026-01-25  500  已发放  ✅              │
│   • 2026-01-20  300  处理中  🔄              │
│                                              │
└──────────────────────────────────────────────┘
```

- [x] 领取页面 UI
- [x] Solana 地址格式校验
- [x] 对接领取 API
- [x] 领取历史列表

---

## 五、移动端布局

### PC (≥1024px)
```
┌─────────────────────────────────────┐
│ Header (余额 + 统计)                │
├───────────────────────┬─────────────┤
│                       │             │
│     Canvas 800x600    │  Sidebar    │
│                       │             │
├───────────────────────┴─────────────┤
│ Player Bar + Control Bar            │
└─────────────────────────────────────┘
```

### Mobile (<768px)
```
┌─────────────────────────┐
│ Header (精简)           │
├─────────────────────────┤
│                         │
│   Canvas (全宽缩放)      │
│                         │
├─────────────────────────┤
│ 👆 上滑查看详情          │
├─────────────────────────┤
│ Control Bar (固定底部)  │
└─────────────────────────┘
```

---

## 六、交付物

- [x] `hooks/useGuestAuth.ts`
- [x] `hooks/useResponsiveCanvas.ts`
- [x] `pages/Withdraw.tsx`
- [x] `components/room/RoomList.tsx`
- [x] `components/room/RoomCard.tsx`
- [x] `components/room/QRCodeShare.tsx`
- [x] `game/MemePhysics.ts` - 物理引擎
- [x] 重构 `GameCanvas.tsx` (响应式 + 触控 + 轨迹线)
- [x] 移动端样式适配

---

## 七、变更记录

| 日期 | 变更内容 |
|------|----------|
| 2026-01-26 | 完成游客系统、房间功能、移动端适配、领取功能 |
| 2026-01-26 | 重新设计 Meme 游动系统（物理引擎 + 轨迹线） |
| 2026-01-27 | 新增 QRCodeShare 二维码分享组件 |
